<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>For Shreya üíò</title>

  <style>
    :root{
      --bg1:#fff1f6;
      --bg2:#ffe6f1;
      --card:#ffffffde;
      --text:#1f1f1f;
      --pink:#ff2f7d;
      --pink2:#ff7fb4;
      --shadow: 0 22px 70px rgba(255,47,125,.22);
      --border: 1px solid rgba(0,0,0,.06);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      display:grid;
      place-items:center;
      overflow:hidden;
      background:
        radial-gradient(1200px 800px at 12% 12%, #ffd2e6 0%, transparent 55%),
        radial-gradient(1000px 700px at 88% 35%, #ffe9f2 0%, transparent 60%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
    }

    /* soft floating hearts */
    .heart{
      position:absolute;
      width:16px;height:16px;
      transform: rotate(45deg);
      background: rgba(255,47,125,.18);
      border-radius:4px;
      animation: floatUp 11s linear infinite;
      opacity:.75;
      pointer-events:none;
      z-index:0;
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:16px;height:16px;
      background: inherit;
      border-radius:50%;
    }
    .heart:before{ left:-8px; top:0;}
    .heart:after{ top:-8px; left:0;}
    @keyframes floatUp{
      from{ transform: translateY(30vh) rotate(45deg); }
      to{ transform: translateY(-120vh) rotate(45deg); }
    }

    /* floating nickname chips */
    .floatWord{
      position:absolute;
      font-weight:900;
      letter-spacing:-.02em;
      padding:8px 12px;
      border-radius:999px;
      border: 1px solid rgba(255,47,125,.18);
      background: rgba(255,255,255,.55);
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 26px rgba(255,47,125,.10);
      color: rgba(31,31,31,.72);
      pointer-events:none;
      user-select:none;
      white-space:nowrap;
      transform: translate(-50%,-50%);
      opacity:.95;
      animation: drift 16s linear infinite;
      font-size: 13px;
      z-index:1;
    }
    .floatWord b{ color: rgba(255,47,125,.95); }
    @keyframes drift{
      0%   { transform: translate(-50%,-50%) translateY(30vh); opacity:0; }
      10%  { opacity:.95; }
      100% { transform: translate(-50%,-50%) translateY(-120vh); opacity:0; }
    }

    .wrap{
      width:min(980px, 94vw);
      padding:22px;
      position:relative;
      z-index:2;
    }

    .card{
      background:var(--card);
      border:1px solid rgba(255,255,255,.6);
      border-radius:28px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      padding:22px 18px;
      position:relative;
      overflow:hidden;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255,47,125,.10);
      border:1px solid rgba(255,47,125,.18);
      font-weight:900;
      font-size:13px;
    }
    .progress{
      font-size:13px;
      opacity:.75;
      white-space:nowrap;
    }

    h1{
      margin:10px 0 8px;
      font-size: clamp(22px, 4vw, 34px);
      letter-spacing:-.02em;
      line-height:1.12;
    }
    p{
      margin:8px 0;
      font-size:15.5px;
      line-height:1.7;
      opacity:.95;
    }

    .scene{ display:none; animation: in .45s ease; }
    .scene.active{ display:block; }
    @keyframes in{ from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)} }

    .pillrow{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255,47,125,.09);
      border:1px solid rgba(255,47,125,.16);
      font-size:13px;
      font-weight:900;
      color: rgba(31,31,31,.86);
    }

    .bubble{
      background: rgba(255,255,255,.78);
      border:var(--border);
      border-radius:18px;
      padding:14px;
      margin-top:14px;
      box-shadow: 0 10px 22px rgba(0,0,0,.04);
    }

    .note{
      margin-top:14px;
      padding:12px 14px;
      border-radius:16px;
      background: rgba(255,47,125,.07);
      border:1px solid rgba(255,47,125,.14);
    }

    .media{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
      margin-top:12px;
    }
    .media img{
      width: min(380px, 88vw);
      border-radius:18px;
      border: var(--border);
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
      object-fit:cover;
    }
    .caption{
      text-align:center;
      font-size:12.5px;
      opacity:.72;
      margin-top:8px;
    }

    /* sticky nav so poem never feels stuck */
    .nav{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:16px;
      align-items:center;
      justify-content:space-between;

      position: sticky;
      bottom: 12px;
      background: rgba(255,255,255,.78);
      border: var(--border);
      border-radius: 18px;
      padding: 10px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
      z-index: 5;
    }
    .navTop{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
      align-items:center;
      justify-content:space-between;
    }

    button{
      border:0;
      border-radius:16px;
      padding:12px 14px;
      font-weight:950;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
    }
    button:hover{ transform: translateY(-1px); filter: brightness(1.02); }

    .btn{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:white;
      box-shadow: 0 12px 24px rgba(255,47,125,.22);
    }
    .btn2{
      background: rgba(0,0,0,.06);
      color:#333;
    }

    .yesArea{
      margin-top:16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    .no-wrap{ position:relative; display:inline-block; }

    .sparkle{
      position:absolute;
      pointer-events:none;
      width:10px;height:10px;
      border-radius:50%;
      background: rgba(255,47,125,.7);
      transform: translate(-50%,-50%);
      animation: pop .55s ease-out forwards;
      filter: blur(.2px);
      z-index:999;
    }
    @keyframes pop{
      0%{ opacity:0; transform: translate(-50%,-50%) scale(.6); }
      20%{ opacity:1; }
      100%{ opacity:0; transform: translate(-50%,-70%) scale(1.6); }
    }

    .poem{
      line-height:1.9;
      font-size:15px;
    }
    .poem p{ margin: 12px 0; }

    /* music control */
    .musicPill{
      position:fixed;
      right:14px;
      bottom:14px;
      z-index:10;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.78);
      border: var(--border);
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      backdrop-filter: blur(10px);
    }
    .musicDot{
      width:10px;height:10px;border-radius:50%;
      background: rgba(255,47,125,.9);
      box-shadow: 0 0 0 6px rgba(255,47,125,.12);
      opacity:.45;
    }
    .musicLabel{
      font-size:12.5px;
      font-weight:900;
      opacity:.85;
      white-space:nowrap;
    }
    .musicBtn{
      padding:10px 12px;
      border-radius:999px;
      font-weight:950;
    }

    audio{ width:100%; max-width:360px; }

    .bigheart{
      font-size:54px;
      display:inline-block;
      animation: thump 1.2s ease-in-out infinite;
      filter: drop-shadow(0 10px 18px rgba(255,47,125,.18));
      margin:6px 0 2px;
    }
    @keyframes thump{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.08)} }
  </style>
</head>

<body>
  <script>
    const heartCount = 18;
    for(let i=0;i<heartCount;i++){
      const h=document.createElement('div');
      h.className='heart';
      h.style.left = Math.random()*100+'vw';
      h.style.animationDuration = (8+Math.random()*10)+'s';
      h.style.animationDelay = (-Math.random()*14)+'s';
      const s = 10 + Math.random()*18;
      h.style.width = s+'px';
      h.style.height = s+'px';
      h.style.opacity = 0.25 + Math.random()*0.45;
      document.body.appendChild(h);
    }
  </script>

  <audio id="bgm" loop preload="none"></audio>

  <div class="musicPill" aria-label="music control">
    <div class="musicDot" id="musicDot"></div>
    <div class="musicLabel" id="musicLabel">Music: Off</div>
    <button class="btn2 musicBtn" id="musicToggle">Play</button>
  </div>

  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="badge">üíå For <span id="herName"></span></div>
        <div class="progress" id="progress"></div>
      </div>

      <div id="scenes"></div>
    </div>
  </div>

  <script>
    // ===== Customize =====
    const NAME = "Shreya";

    // files must be in the SAME folder as index.html
    const COUPLE_PHOTO = "us.jpg";        // or "us.png"
    const VOICE_MP3    = "shreya.mp3";
    const VOICE_M4A    = "shreya.m4a";
    const MUSIC_MP3    = "music.mp3";
    // =====================

    document.getElementById("herName").textContent = NAME;

    // cache buster helps Safari / GitHub caching while you edit
    const CB = `?v=${Date.now()}`;

    // --- music ---
    const bgm = document.getElementById("bgm");
    bgm.src = MUSIC_MP3 + CB;

    const musicToggle = document.getElementById("musicToggle");
    const musicLabel  = document.getElementById("musicLabel");
    const musicDot    = document.getElementById("musicDot");

    function setMusicUI(isOn){
      musicLabel.textContent = "Music: " + (isOn ? "On" : "Off");
      musicToggle.textContent = isOn ? "Pause" : "Play";
      musicDot.style.opacity = isOn ? "1" : ".45";
    }
    setMusicUI(false);

    async function tryPlayMusic(){
      try{
        await bgm.play();
        localStorage.setItem("bgm_on","1");
        setMusicUI(true);
      }catch(e){
        setMusicUI(false);
      }
    }
    function pauseMusic(){
      bgm.pause();
      localStorage.setItem("bgm_on","0");
      setMusicUI(false);
    }
    musicToggle.addEventListener("click", async ()=>{
      if(bgm.paused) await tryPlayMusic();
      else pauseMusic();
    });

    // --- floating nickname words ---
    const nicknames = [
      {t:"Chalky", e:"üíò"},
      {t:"Sanu", e:"üåô"},
      {t:"Baby", e:"üíã"},
      {t:"Mrs Thapa", e:"üåπ"},
      {t:"Chalky", e:"ü´Ç"},
      {t:"Sanu", e:"üíû"},
      {t:"Baby", e:"üç´"},
      {t:"Mrs Thapa", e:"üß∏"},
      {t:"Chalky", e:"üòò"},
      {t:"Sanu", e:"‚ù§Ô∏è"},
      {t:"Baby", e:"üåπ"},
      {t:"Mrs Thapa", e:"üíó"}
    ];

    function spawnWord(){
      const w = document.createElement("div");
      w.className = "floatWord";
      const pick = nicknames[Math.floor(Math.random()*nicknames.length)];
      w.style.left = (6 + Math.random()*88) + "vw";
      w.style.top  = (70 + Math.random()*25) + "vh";
      const size = 12 + Math.random()*6;
      w.style.fontSize = size + "px";
      const dur = 12 + Math.random()*10;
      w.style.animationDuration = dur + "s";
      w.style.animationDelay = (-Math.random()*dur) + "s";
      w.style.opacity = (0.75 + Math.random()*0.25).toFixed(2);
      w.innerHTML = `<b>${pick.t}</b> ${pick.e}`;
      document.body.appendChild(w);
      setTimeout(()=>w.remove(), (dur+2)*1000);
    }
    for(let i=0;i<10;i++) spawnWord();
    setInterval(spawnWord, 1200);

    // --- sparkles ---
    function sparkle(x,y){
      const s=document.createElement('div');
      s.className='sparkle';
      s.style.left = x+'px';
      s.style.top = y+'px';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(), 600);
    }

    // --- scene template ---
    function tplScene({title, dayLabel="", pills=[], bodyHTML="", showPhoto=false, showVoice=false, final=false, isPoem=false}) {
      const wrap = document.createElement("div");
      wrap.className = "scene";

      const dayHTML = dayLabel ? `<div class="pillrow"><div class="pill">${dayLabel}</div></div>` : "";
      const pillsHTML = pills.length ? `<div class="pillrow">${pills.map(t=>`<div class="pill">${t}</div>`).join("")}</div>` : "";
      const poemTopNav = isPoem ? `
        <div class="navTop">
          <button class="btn2" id="prevBtnTop">‚Üê Back</button>
          <button class="btn" id="nextBtnTop">Next ‚Üí</button>
        </div>
      ` : "";

      const photoHTML = showPhoto ? `
        <div class="media">
          <img src="${COUPLE_PHOTO + CB}" alt="us" loading="lazy">
        </div>
        <div class="caption">This is my favorite photo. (Don‚Äôt argue. I already decided.)</div>
      ` : "";

      const voiceHTML = showVoice ? `
        <div class="bubble" style="margin-top:14px; text-align:center;">
          <p style="margin:0; font-weight:950;">Press play.</p>
          <p style="margin:6px 0 12px; opacity:.75;">And don‚Äôt do that thing where you act annoyed but secretly smile.</p>
          <audio controls preload="none">
            <source src="${VOICE_MP3 + CB}" type="audio/mpeg">
            <source src="${VOICE_M4A + CB}" type="audio/mp4">
            Your browser does not support audio playback.
          </audio>
        </div>
      ` : "";

      wrap.innerHTML = `
        <h1>${title}</h1>
        ${dayHTML}
        ${pillsHTML}
        ${poemTopNav}
        <div class="bubble">${bodyHTML}</div>
        ${voiceHTML}
        ${photoHTML}
        ${final ? `
          <div class="yesArea">
            <button class="btn" id="yesBtn">YES üíû</button>
            <span class="no-wrap">
              <button class="btn2" id="noBtn">No üò∂</button>
            </span>
          </div>
          <div class="caption" id="noHint">You can answer honestly‚Ä¶ but that ‚ÄúNo‚Äù button is scared of you.</div>
        ` : `
          <div class="nav">
            <button class="btn2" id="prevBtn">‚Üê Back</button>
            <button class="btn" id="nextBtn">Next ‚Üí</button>
          </div>
        `}
      `;

      return wrap;
    }

    // --- pages (romantic + funny + not cheesy-corporate) ---
    const PAGES = [
      {
        day: "Welcome",
        title: `Hi ${NAME}‚Ä¶ ü•∫üëâüëà`,
        dayLabel: "Just‚Ä¶ read this okay üíó",
        pills: ["Chalky", "Sanu", "Baby", "Mrs Thapa"],
        bodyHTML: `
          <p>Okay listen.</p>
          <p>I know you already know everything about us. I‚Äôm not doing the ‚Äúwhat‚Äôs your favorite‚Ä¶‚Äù interview. We‚Äôre past that. üòå</p>
          <p>This is just me being fully in love with you and not hiding it.</p>
          <div class="note">
            <p style="margin:0;">Open the music if you want. Then go page by page. And if you laugh‚Ä¶ good. That‚Äôs literally the point.</p>
          </div>
        `
      },

      {
        day: "Rose Day",
        title: "Rose Day üåπ",
        dayLabel: "Rose Day",
        bodyHTML: `
          <p>If I was next to you right now, I‚Äôd give you a rose‚Ä¶</p>
          <p>‚Ä¶and then I‚Äôd stand there smiling like an idiot because I‚Äôd be thinking ‚Äúhow is she real.‚Äù</p>
          <p>So here. A rose for you: üåπ</p>
          <p>Also please don‚Äôt say ‚Äúawww‚Äù out loud in public. Or do. I like that too.</p>
        `
      },

      {
        day: "Propose Day",
        title: "Propose Day üíç",
        dayLabel: "Propose Day",
        bodyHTML: `
          <p>Not a big speech. Not a dramatic vibe.</p>
          <p>Just this:</p>
          <p><b>I want you.</b> In the normal days. In the tired days. In the ‚ÄúI miss you‚Äù days (which is‚Ä¶ basically daily).</p>
          <p>So yeah. I‚Äôm proposing we keep being us. Forever-ish. üòå</p>
        `
      },

      {
        day: "Chocolate Day",
        title: "Chocolate Day üç´",
        dayLabel: "Chocolate Day",
        bodyHTML: `
          <p>If I could send chocolate through the screen, I would‚Äôve already done it 50 times.</p>
          <p>Until science stops disappointing me‚Ä¶ please eat something sweet today.</p>
          <p>And if you don‚Äôt, I‚Äôll still love you.</p>
          <p>But I‚Äôll be slightly offended on behalf of romance. Just a little.</p>
        `
      },

      {
        day: "Teddy Day",
        title: "Teddy Day üß∏",
        dayLabel: "Teddy Day",
        bodyHTML: `
          <p>I‚Äôm not saying I want to replace your teddy.</p>
          <p>I‚Äôm saying‚Ä¶ if I could, I would.</p>
          <p>Because I want to be the thing you hold when you‚Äôre sleepy and soft and the world is quiet.</p>
          <p>Also yes, I‚Äôm jealous of your pillow. Don‚Äôt judge me.</p>
        `
      },

      {
        day: "Promise Day",
        title: "Promise Day ü§ù",
        dayLabel: "Promise Day",
        bodyHTML: `
          <p>I don‚Äôt have ‚Äúpromises‚Äù like in movies.</p>
          <p>I have the real ones:</p>
          <p>
            ‚Ä¢ I‚Äôll keep choosing you.<br>
            ‚Ä¢ I‚Äôll keep showing up (even from far).<br>
            ‚Ä¢ I‚Äôll keep being gentle with you.<br>
            ‚Ä¢ I‚Äôll keep making you laugh when you don‚Äôt feel like laughing.
          </p>
          <p>And I‚Äôll never forget our favorites: first date, full moon at Patan Mandir, momo in Patan ko Galli. That‚Äôs home for me.</p>
        `
      },

      {
        day: "Poem",
        title: "üåô",
        dayLabel: "",
        pills: ["(a quiet page)"],
        isPoem: true,
        bodyHTML: `
          <p style="opacity:.85; font-style:italic; margin-top:0;">
            I‚Äôm not going to explain this.<br>
            I‚Äôm just going to leave it here.
          </p>

          <div class="poem">
            <p>
              If only I could own my dreams,<br>
              With sleepless night, I would trade all of it.<br>
              Telling the birds to sleep early and quiet,<br>
              Even the leaves wouldn‚Äôt make any noise.
            </p>

            <p>
              And here I hold my breath all so tight<br>
              For listening you breathe all whole night
            </p>

            <p>
              If morning were endless<br>
              And you drizzle like rain
            </p>

            <p>
              I could be an ocean receiving all your pain.
            </p>

            <p>
              Let the pain move like waves between shores of our souls<br>
              And embrace each other until it utterly goes
            </p>

            <p>
              Unite our soul, make it whole and make those pain never shows again<br>
              And tell our tale to the clouds as they listen cravingly, the pelting rain
            </p>

            <p>
              The worst things about mornings and nights,<br>
              They always end
            </p>

            <p>
              I pass the time in between, counting hours, till comes the another night<br>
              My heart, I love you with all my soul and with all my might
            </p>

            <p>
              Among all the loveliest things, you are the only one precious, I have.<br>
              For length of my love is far greater than length of my life
            </p>

            <p>
              Give me a little of you dear, and I will give you all of mine
            </p>

            <p>
              If I could stop my heart from loving you<br>
              Then I shall remain heartless<br>
              For there‚Äôs nothing I would rather do<br>
              Than spending my whole life loving only you.
            </p>
          </div>
        `
      },

      {
        day: "Hug Day",
        title: "Hug Day ü´Ç",
        dayLabel: "Hug Day",
        bodyHTML: `
          <p>I miss you in a very specific way.</p>
          <p>Like the kind where I want to pull you close and not talk for a minute. Just‚Ä¶ exist.</p>
          <div class="note">
            <p style="margin:0;">
              Hug protocol:<br>
              1) close your eyes<br>
              2) imagine I‚Äôm hugging you<br>
              3) imagine I refuse to let go<br>
              4) yes, you‚Äôre stuck. sorry. ü´Ç
            </p>
          </div>
          <p>Distance is annoying. You‚Äôre not.</p>
        `
      },

      {
        day: "Kiss Day",
        title: "Kiss Day üíã",
        dayLabel: "Kiss Day",
        bodyHTML: `
          <p>Okay I owe you kisses. A lot.</p>
          <p>But first we need to address the historic incident:</p>
          <p><b>the day I didn‚Äôt eat ice-cream through your mouth.</b></p>
          <p>I still don‚Äôt know what I was thinking. Fear? Respect? Survival instinct? Probably all three. üò≠</p>
          <p>You were mad. I was confused. We were iconic.</p>
          <p>Anyway. I‚Äôm sending you a kiss that says: ‚ÄúI love you‚Ä¶ and I‚Äôm still slightly scared of you with ice-cream.‚Äù</p>
        `
      },

      {
        day: "Valentine",
        title: `${NAME}‚Ä¶ üíò`,
        dayLabel: "Valentine",
        pills: ["Chalky", "Sanu", "Baby", "Mrs Thapa"],
        showVoice: true,
        showPhoto: true,
        final: true,
        bodyHTML: `
          <p>I don‚Äôt have a list of reasons.</p>
          <p>I just‚Ä¶ love you.</p>
          <p>Like the simple kind that stays. The kind that makes me miss you even when I‚Äôm busy. The kind that feels safe.</p>
          <div class="note">
            <p style="margin:0; font-weight:950;">Will you be my Valentine? üåπ</p>
          </div>
          <p class="caption"><span class="bigheart">üíò</span></p>
        `
      }
    ];

    const scenesEl = document.getElementById("scenes");
    const progressEl = document.getElementById("progress");

    const nodes = PAGES.map(p => tplScene({
      title: p.title,
      dayLabel: p.dayLabel || "",
      pills: p.pills || [],
      bodyHTML: p.bodyHTML || "",
      showPhoto: !!p.showPhoto,
      showVoice: !!p.showVoice,
      final: !!p.final,
      isPoem: !!p.isPoem
    }));

    nodes.forEach(n => scenesEl.appendChild(n));

    let idx = 0;

    function updateProgress(){
      progressEl.textContent = `${idx+1} / ${PAGES.length}`;
    }

    function bindNav(active){
      const prev = active.querySelector("#prevBtn");
      const next = active.querySelector("#nextBtn");
      if(prev) prev.onclick = (e)=>{ sparkle(e.clientX, e.clientY); show(idx-1); };
      if(next) next.onclick = (e)=>{ sparkle(e.clientX, e.clientY); show(idx+1); };

      const prevTop = active.querySelector("#prevBtnTop");
      const nextTop = active.querySelector("#nextBtnTop");
      if(prevTop) prevTop.onclick = (e)=>{ sparkle(e.clientX, e.clientY); show(idx-1); };
      if(nextTop) nextTop.onclick = (e)=>{ sparkle(e.clientX, e.clientY); show(idx+1); };
    }

    function bindFinal(active){
      const yes = active.querySelector("#yesBtn");
      const no  = active.querySelector("#noBtn");
      const hint = active.querySelector("#noHint");
      const wrap = active.querySelector(".no-wrap");

      let noDodges = 0;
      const noPhrases = [
        "Are you sure? ü•∫",
        "Wait wait wait üò≠",
        "That option is suspicious‚Ä¶",
        "Try again üòå",
        "Okay but‚Ä¶ yes? üò≥",
        "I‚Äôm going to be softly sad üòî",
        "That‚Äôs illegal üöîüíò",
        "Universe says no üåå",
        "Please ü•π",
        "Last chance üçì"
      ];

      function dodge(){
        noDodges++;
        if(hint) hint.textContent = noPhrases[Math.min(noDodges-1, noPhrases.length-1)];

        const cardRect = document.querySelector(".card").getBoundingClientRect();
        const maxX = Math.max(0, Math.min(220, cardRect.width - 180));
        const maxY = 50;

        const x = (Math.random()*maxX) - (maxX/2);
        const y = (Math.random()*maxY) - (maxY/2);

        if(wrap){
          wrap.style.transform = `translate(${x}px, ${y}px)`;
          wrap.style.transition = "transform .12s ease";
        }

        if(noDodges >= 10 && no) no.textContent = "I‚Äôm shy üôà";
        if(noDodges >= 14 && no){
          no.textContent = "Okay fine‚Ä¶ click me";
          no.removeEventListener("mouseenter", dodge);
          no.removeEventListener("touchstart", dodge);
        }
      }

      if(yes){
        yes.onclick = async (e)=>{
          sparkle(e.clientX, e.clientY);
          if(localStorage.getItem("bgm_on") === "1" && bgm.paused) await tryPlayMusic();
          alert(`YAY üíñ`);
        };
      }

      if(no){
        no.addEventListener("mouseenter", dodge);
        no.addEventListener("touchstart", (e)=>{ e.preventDefault(); dodge(); }, {passive:false});
        no.onclick = (e)=>{
          sparkle(e.clientX, e.clientY);
          alert("Nice try üòå");
        };
      }
    }

    function show(i){
      idx = Math.max(0, Math.min(i, nodes.length-1));
      document.querySelectorAll(".scene").forEach(s => s.classList.remove("active"));
      const active = nodes[idx];
      active.classList.add("active");
      updateProgress();
      bindNav(active);
      bindFinal(active);

      window.scrollTo({top:0, behavior:"smooth"});
    }

    show(0);
  </script>
</body>
</html>
